<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Productos - Tienda</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #212529; /* Fondo oscuro */
            color: #d1d1d1; /* Texto claro */
            margin: 0;
            padding: 0;
        }

        /* Barra de navegación superior */
        .navbar {
            background-color: #131921;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .navbar-left, .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .navbar-logo, .navbar-user-info {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .navbar-links a {
            color: #d1d1d1;
            text-decoration: none;
            font-size: 16px;
            padding: 5px;
        }

        .search-bar {
            flex-grow: 1; /* Permite que ocupe el espacio restante */
            margin: 0 50px;
        }

        .search-bar input {
            width: 100%;
            padding: 8px 15px;
            border-radius: 5px;
            border: 1px solid #333;
            background-color: #2b3035;
            color: #d1d1d1;
        }

        .user-icon {
            width: 30px;
            height: 30px;
            background-color: #007bff;
            border-radius: 50%;
        }

        /* Título de sección */
        .section-title {
            font-size: 28px;
            font-weight: bold;
            padding: 20px 20px 10px;
        }
        
        /* Lista de productos con scroll horizontal */
        .product-list-container {
            padding: 0 20px;
            overflow-x: auto;
            white-space: nowrap;
        }

        .product-list {
            display: inline-flex;
            gap: 20px;
        }

        /* Estilo de cada tarjeta de producto */
        /* Aplicamos estilos al <a> para que la tarjeta sea clickeable */
        .product-link { 
            text-decoration: none; 
            color: inherit; 
            display: inline-block; /* Importante para que el <a> funcione correctamente como contenedor */
        }
        
        .product {
            background-color: #2b3035;
            width: 200px; /* Ancho fijo para cada tarjeta */
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s;
            vertical-align: top;
        }

        .product:hover {
            transform: scale(1.03);
        }

        /* Contenedor de la imagen para asegurar el tamaño fijo */
        .product-image {
            width: 200px;
            height: 250px; /* Altura fija para la imagen */
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Recorta la imagen para que llene el contenedor */
        }

        .product-info {
            padding: 10px;
            text-align: left;
        }

        .product-info h3 {
            font-size: 16px;
            font-weight: bold;
            margin: 0 0 5px;
            white-space: normal;
            height: 3em; /* Mantiene el tamaño para 2 líneas de texto */
        }
    </style>
</head>
<body>

<div class="navbar">
    <div class="navbar-left">
        <div class="navbar-logo">ROBLOX</div>
        <div class="navbar-links">
            <a href="#">Destacadas</a>
            <a href="#">Mercado</a>
            <a href="{% url 'crear_producto' %}">Crear</a> <a href="#">Robux</a>
        </div>
    </div>
    <div class="search-bar">
        <input type="text" placeholder="Buscar">
    </div>
  <div class="navbar-right">
    {% if user.is_authenticated %}
        <div class="navbar-user-info">
            {{ user.username }}
        </div>
        <a href="{% url 'cambiar_contrasena' %}" style="color: #007bff; text-decoration: none; font-weight: bold;">
            Cambiar Contraseña
        </a>
        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" style="background: none; border: none; padding: 0; cursor: pointer; color: white;">
                <div class="navbar-user-info">
                    Cerrar Sesión
                </div>
            </button>
        </form>
    {% else %}
        <a href="{% url 'login' %}">
            <div class="navbar-user-info">
                Iniciar Sesión
            </div>
        </a>
    {% endif %}
</div>
    </div>
</div>

<div class="section-title">Continuar</div>

<div class="product-list-container">
    <div class="product-list">
        {% for producto in productos %}
        <a href="{% url 'detalle_producto' pk=producto.pk %}" class="product-link">
            <div class="product">
                <div class="product-image">
                    {% if producto.imagen %}
                        <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
                    {% else %}
                        <img src="https://via.placeholder.com/200x250.png?text=Sin+Imagen" alt="Sin imagen">
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3>{{ producto.nombre }}</h3>
                    <p> ${{ producto.precio }} | {{ producto.stock }} en stock </p>
                </div>
            </div>
        </a>
        {% empty %}
        <p>No hay productos disponibles.</p>
        {% endfor %}
    </div>
</div>

</body>
</html>